# image: name:1.0   # <-- tag fixe
 
services:
  # Maria-db
  db:
    build:
      context: ./requirements/mariadb/
      dockerfile: Dockerfile
    container_name: container_mariadb
    ports:
      - "3306:3306"
    restart: always
    env_file: "../secret/.env_mariadb" # <-- that not the real secret... 
    volumes:
      - ~/data/db:/var/lib/mysql

  # WordPress / PHP-FPM
  wordpress:
    build:
      context: ./requirements/wordpress/
    container_name: container_wordpress_php_fpm
    restart: always
    volumes:
      - ~/data/wp:/var/www/html
    depends_on:
      - db

  # # Nginx
  # nginx:
  #   build:
  #     context: ./requirements/nginx/
  #   container_name: container_nginx
  #   restart: always
  #   ports:
  #     - "443:443"
  #   volumes:
  #     - ~/data/wp:/var/www/html
  #   depends_on:
  #     - wordpress